{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '44046646-50f8df335e976b654bc240f3a';\n\n\nexport async function searchImage(query, page = 1) {\n    \n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n    });\n\n    try {\n        const response = await axios(BASE_URL, { params });\n        return {\n            hits: response.data.hits,\n            totalHits: response.data.totalHits,\n        };\n    } catch(err) {\n        alert(err.message);\n    }\n}","export function imageTemplate(image) {\n    return `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img class=\"gallery-image\" width=\"360\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"/>\n            </a>\n            <ul class=\"captions\">\n            <li><strong>Likes</strong> ${image.likes}</li>\n            <li><strong>Views</strong> ${image.views}</li>\n            <li><strong>Comments</strong> ${image.comments}</li>\n            <li><strong>Downloads</strong> ${image.downloads}</li>\n            </ul>\n            </li>\n            `\n}\n    \n    \nexport function imagesTemplate(arr) {\n    return arr.map(imageTemplate).join('');\n}","import { searchImage } from './js/pixabay-api';\nimport { imagesTemplate } from './js/render-functions';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport Simplelightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst moreButton = document.querySelector(\".more-btn\");\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\n\nlet lightbox = new Simplelightbox(\".gallery a\", {\n    captionsData: \"alt\",\n});\n\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    query = event.target.elements.query.value.trim();\n\n    if (!query) {\n        iziToast.info({\n            title: 'Note',\n            message: 'Please enter your search',\n        });\n        return;\n    }\n\n    gallery.innerHTML = \"\";\n    page = 1;\n    totalHits = 0;\n    loader.style.display = \"block\";\n\n    try {\n        const data = await searchImage(query, page);\n        totalHits = data.totalHits;\n            if (data.hits.length === 0) {\n                iziToast.error({\n                    title: 'Error',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                });\n            } else {\n                const markup = imagesTemplate(data.hits);\n                gallery.innerHTML = markup;\n                lightbox.refresh();\n                if (totalHits > data.hits.length) {\n                    moreButton.style.display = \"block\";\n                }\n            }\n        } catch(error) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Please try again later!',\n            });\n            console.log(error);\n        } finally {\n            loader.style.display = \"none\";\n        };\n});\n\n\n\nmoreButton.addEventListener(\"click\", async () => {\n    page += 1;\n    loader.style.display = \"block\";\n    try {\n        const data = await searchImage(query, page);\n        const markup = imagesTemplate(data.hits);\n        gallery.insertAdjacentHTML('beforeend', markup);\n        lightbox.refresh();\n\n        const card = document.querySelector(\".gallery-item\");\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n\n        if (gallery.children.length >= totalHits) {\n            moreButton.style.display = \"none\";\n            iziToast.info({\n            title: 'Note',\n            message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please try again later!',\n        });\n        console.log(error);\n    } finally {\n        loader.style.display = \"none\";\n    }\n});\n\n"],"names":["BASE_URL","API_KEY","searchImage","query","page","params","response","axios","err","imageTemplate","image","imagesTemplate","arr","form","gallery","loader","moreButton","totalHits","lightbox","Simplelightbox","event","iziToast","data","markup","error","cardHeight"],"mappings":"owBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAGT,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAE/C,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EAClB,CAAK,EAED,GAAI,CACA,MAAME,EAAW,MAAMC,EAAMP,EAAU,CAAE,OAAAK,CAAQ,CAAA,EACjD,MAAO,CACH,KAAMC,EAAS,KAAK,KACpB,UAAWA,EAAS,KAAK,SACrC,CACK,OAAOE,EAAK,CACT,MAAMA,EAAI,OAAO,CACpB,CACL,CC3BO,SAASC,EAAcC,EAAO,CACjC,MAAO;AAAA,4CACiCA,EAAM,aAAa;AAAA,0DACLA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,yCAGvDA,EAAM,KAAK;AAAA,yCACXA,EAAM,KAAK;AAAA,4CACRA,EAAM,QAAQ;AAAA,6CACbA,EAAM,SAAS;AAAA;AAAA;AAAA,aAI5D,CAGO,SAASC,EAAeC,EAAK,CAChC,OAAOA,EAAI,IAAIH,CAAa,EAAE,KAAK,EAAE,CACzC,CCRA,MAAMI,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,WAAW,EAErD,IAAIb,EAAQ,GACRC,EAAO,EACPa,EAAY,EAGZC,EAAW,IAAIC,EAAe,aAAc,CAC5C,aAAc,KAClB,CAAC,EAEDN,EAAK,iBAAiB,SAAU,MAAMO,GAAS,CAK3C,GAJAA,EAAM,eAAc,EAEpBjB,EAAQiB,EAAM,OAAO,SAAS,MAAM,MAAM,OAEtC,CAACjB,EAAO,CACRkB,EAAS,KAAK,CACV,MAAO,OACP,QAAS,0BACrB,CAAS,EACD,MACH,CAEDP,EAAQ,UAAY,GACpBV,EAAO,EACPa,EAAY,EACZF,EAAO,MAAM,QAAU,QAEvB,GAAI,CACA,MAAMO,EAAO,MAAMpB,EAAYC,EAAOC,CAAI,EAEtC,GADJa,EAAYK,EAAK,UACTA,EAAK,KAAK,SAAW,EACrBD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,0EAC7B,CAAiB,MACE,CACH,MAAME,EAASZ,EAAeW,EAAK,IAAI,EACvCR,EAAQ,UAAYS,EACpBL,EAAS,QAAO,EACZD,EAAYK,EAAK,KAAK,SACtBN,EAAW,MAAM,QAAU,QAElC,CACJ,OAAOQ,EAAO,CACXH,EAAS,MAAM,CACX,MAAO,QACP,QAAS,yBACzB,CAAa,EACD,QAAQ,IAAIG,CAAK,CAC7B,QAAkB,CACNT,EAAO,MAAM,QAAU,MAEnC,CAAA,CAAC,EAIDC,EAAW,iBAAiB,QAAS,SAAY,CAC7CZ,GAAQ,EACRW,EAAO,MAAM,QAAU,QACvB,GAAI,CACA,MAAMO,EAAO,MAAMpB,EAAYC,EAAOC,CAAI,EACpCmB,EAASZ,EAAeW,EAAK,IAAI,EACvCR,EAAQ,mBAAmB,YAAaS,CAAM,EAC9CL,EAAS,QAAO,EAGhB,MAAMO,EADO,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACZ,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QACtB,CAAS,EAEGX,EAAQ,SAAS,QAAUG,IAC3BD,EAAW,MAAM,QAAU,OAC3BK,EAAS,KAAK,CACd,MAAO,OACP,QAAS,4DACrB,CAAS,EAEJ,OAAQG,EAAO,CACZH,EAAS,MAAM,CACX,MAAO,QACP,QAAS,yBACrB,CAAS,EACD,QAAQ,IAAIG,CAAK,CACzB,QAAc,CACNT,EAAO,MAAM,QAAU,MAC1B,CACL,CAAC"}